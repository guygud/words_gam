// Сервис для работы со словарем

export class DictionaryService {
    constructor() {
        // Расширенный словарь русских слов
        this.words = new Set([
            // Конкретные слова для головоломки
            'СТОЛБ', 'ЛАМПА', 'КНИГА', 'ШТУКА', 'ГРУША',
            // Полное слово дня
            'МЕТРОПОЛИС',
            
            // Реальные русские слова (3 буквы)
            'МЕТ', 'МЕТР', 'МЕТРО',
            'ПОЛ', 'ПОЛИС',
            'РОТ', 'ТОМ', 'МОСТ', 'ТОП', 'ПОТ',
            'ЛИС', 'СИЛ', 'СОЛ', 'РОС',
            'МИР', 'РИМ', 'ПИР',
            'ЛЕС', 'СЕЛ', 'ТОЛ',
            'ТЕЛ', 'ТЕЛО', // тело
            
            // Реальные слова (4 буквы)
            'МЕТР', 'МЕТРО', 'ПОЛИС', 'МЕТРОПОЛИС',
            'ПОЛЕ', 'ПОЛЕТ', 'ПОЛО', 'ПОЛОС',
            'ТОПОЛЬ', 'ТОПОЛ',
            'МОСТ', 'МОСТИ', 'МОСТИК',
            'РОСТ', 'РОСТИ', 'РОСТОК',
            'ЛИСТ', 'ЛИСТОК',
            'СИЛО', 'СИЛОС',
            'МИРТ', 'МИРТО',
            'ПИРО', 'ПИРОС',
            'ТОЛП', 'ТОЛПА',
            'ЛЕСО', 'ЛЕСОК',
            'СЕЛО', 'СЕЛОС',
            'ТЕЛО', // тело
            
            // Реальные слова (5+ букв)
            'МЕТРО', 'МЕТРОПОЛИС',
            'ПОЛИС', 'ПОЛИСИ',
            'ТОПОЛЬ', 'ТОПОЛЕ',
            'МОСТИК', 'МОСТИКИ',
            'РОСТОК', 'РОСТОКИ',
            'ЛИСТОК', 'ЛИСТОКИ',
            'ТОЛПА', 'ТОЛПЫ',
            'СЕЛО', 'СЕЛОС',
            
            // Подстроки из слова дня для упрощения
            'МЕТ', 'МЕТР', 'МЕТРО', 'МЕТРОП', 'МЕТРОПО', 'МЕТРОПОЛ', 'МЕТРОПОЛИ', 'МЕТРОПОЛИС',
            'ЕТР', 'ЕТРО', 'ЕТРОП', 'ЕТРОПО', 'ЕТРОПОЛ', 'ЕТРОПОЛИ', 'ЕТРОПОЛИС',
            'ТРО', 'ТРОП', 'ТРОПО', 'ТРОПОЛ', 'ТРОПОЛИ', 'ТРОПОЛИС',
            'РОП', 'РОПО', 'РОПОЛ', 'РОПОЛИ', 'РОПОЛИС',
            'ОПО', 'ОПОЛ', 'ОПОЛИ', 'ОПОЛИС',
            'ПОЛ', 'ПОЛИ', 'ПОЛИС',
            'ОЛИ', 'ОЛИС',
            'ЛИС',
            
            // Обратные подстроки
            'СИЛ', 'СИЛО', 'СИЛОП', 'СИЛОПОР', 'СИЛОПОРТЕ', 'СИЛОПОРТЕМ',
            'ИЛО', 'ИЛОП', 'ИЛОПОР', 'ИЛОПОРТЕ', 'ИЛОПОРТЕМ',
            'ЛОП', 'ЛОПОР', 'ЛОПОРТЕ', 'ЛОПОРТЕМ',
            'ОПОР', 'ОПОРТЕ', 'ОПОРТЕМ',
            'ПОРТЕ', 'ПОРТЕМ',
            'ОРТЕ', 'ОРТЕМ',
            'РТЕ', 'РТЕМ',
            'ТЕМ',
            
            // Дополнительные комбинации для упрощения
            'МОСТ', 'РОСТ', 'ЛИСТ', 'ТОСТ', 'ПОСТ',
            'МОСТИ', 'РОСТИ', 'ЛИСТИ',
            'ТОПОЛЬ', 'ТОПОЛЕ',
            'ПОЛЕ', 'ПОЛЕТ', 'ПОЛО',
            'МИР', 'РИМ', 'ПИР', 'ТИР',
            'СОЛ', 'ЛОС', 'РОС', 'ТОС',
            'ЛЕС', 'СЕЛ', 'ТЕЛ', 'ТЕЛО',
            'ТОЛП', 'ТОЛПА',
            // Слова с Т, Е, Л, О
            'ТЕЛО', 'ТЕЛ', 'ЛЕТО', 'ЛЕТ', 'ОТЕЛ', 'ОТЕЛЬ',
            'ТОЛ', 'ТОЛЕ', 'ТОЛЕС', 'ТОЛЕСО',
            'ЛОТ', 'ЛОТО', 'ЛОТЕ', 'ЛОТЕС',
            'ОТЕЛ', 'ОТЕЛЬ', 'ОТЕЛЬС',
            'ЕЛО', 'ЕЛОС', 'ЕЛОСИ',
            'ОЛЕ', 'ОЛЕС', 'ОЛЕСИ'
        ]);
    }
    
    // Проверка, является ли строка словом из словаря
    isWord(word) {
        if (!word || word.length === 0) {
            return false;
        }
        
        // Приводим к верхнему регистру для сравнения
        const upperWord = word.toUpperCase().trim();
        return this.words.has(upperWord);
    }
    
    // Добавить слово в словарь
    addWord(word) {
        if (word) {
            this.words.add(word.toUpperCase().trim());
        }
    }
    
    // Загрузка словаря из файла (для будущего использования)
    async loadFromFile(url) {
        try {
            const response = await fetch(url);
            const text = await response.text();
            const words = text.split('\n')
                .map(line => line.trim())
                .filter(line => line.length > 0);
            
            words.forEach(word => this.addWord(word));
            return true;
        } catch (error) {
            console.error('Ошибка загрузки словаря:', error);
            return false;
        }
    }
}
